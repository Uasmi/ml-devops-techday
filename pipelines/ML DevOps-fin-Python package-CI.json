{"options":[{"enabled":false,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"Bug","assignToRequestor":"true","additionalFields":"{}"}}],"variables":{"python.version":{"value":"2.7, 3.5, 3.6, 3.7"},"system.debug":{"value":"false","allowOverride":true}},"retentionRules":[{"branches":["+refs/heads/*"],"artifacts":[],"artifactTypesToDelete":["FilePath","SymbolStore"],"daysToKeep":10,"minimumToKeep":1,"deleteBuildRecord":true,"deleteTestResults":true}],"properties":{},"tags":[],"_links":{"self":{"href":"https://dev.azure.com/uanass/ccde83eb-3d6a-4387-9f6d-a710ebd88d5b/_apis/build/Definitions/3?revision=28"},"web":{"href":"https://dev.azure.com/uanass/ccde83eb-3d6a-4387-9f6d-a710ebd88d5b/_build/definition?definitionId=3"},"editor":{"href":"https://dev.azure.com/uanass/ccde83eb-3d6a-4387-9f6d-a710ebd88d5b/_build/designer?id=3&_a=edit-build-definition"},"badge":{"href":"https://dev.azure.com/uanass/ccde83eb-3d6a-4387-9f6d-a710ebd88d5b/_apis/build/status/3"}},"buildNumberFormat":"$(date:yyyyMMdd)$(rev:.r)","jobAuthorizationScope":1,"jobTimeoutInMinutes":60,"jobCancelTimeoutInMinutes":5,"process":{"phases":[{"steps":[{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Use Python 3.6","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"33c63b11-352b-45a2-ba1b-54cb568a29ca","versionSpec":"0.*","definitionType":"task"},"inputs":{"versionSpec":"3.6","addToPath":"true","architecture":"x64"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Bash Script","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","versionSpec":"3.*","definitionType":"task"},"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"python --version\npip install azure-cli==2.0.46\npip install --upgrade azureml-sdk[cli]\npip install -r requirements.txt\npip install onnx\npip install -U tf2onnx","workingDirectory":"","failOnStderr":"false","noProfile":"true","noRc":"true"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Create or Get Workspace","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"8e0bee02-4e10-41af-954d-a1da339b10ae","scriptLocation":"inlineScript","scriptPath":"","inlineScript":"python scripts/init_workspace.py","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Init Distributed Training","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"8e0bee02-4e10-41af-954d-a1da339b10ae","scriptLocation":"inlineScript","scriptPath":"distributed_training.py","inlineScript":"python scripts/distributed_training.py","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Validate results","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"8e0bee02-4e10-41af-954d-a1da339b10ae","scriptLocation":"inlineScript","scriptPath":"distributed_training.py","inlineScript":"python scripts/validate.py","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Download Model","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"8e0bee02-4e10-41af-954d-a1da339b10ae","scriptLocation":"inlineScript","scriptPath":"distributed_training.py","inlineScript":"python scripts/load_model.py","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Freeze Graph","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"8e0bee02-4e10-41af-954d-a1da339b10ae","scriptLocation":"inlineScript","scriptPath":"distributed_training.py","inlineScript":"python scripts/convert_to_onnx.py","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Create ONNX","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"8e0bee02-4e10-41af-954d-a1da339b10ae","scriptLocation":"inlineScript","scriptPath":"distributed_training.py","inlineScript":"python -m tf2onnx.convert --input ../mnist-tf/ckpt/frozen_model.pb --output model/model.onnx --outputs network/output/MatMul:0 --inputs network/X:0","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}},{"environment":{},"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Register ONNX Model","timeoutInMinutes":0,"condition":"succeeded()","task":{"id":"46e4be58-730b-4389-8a2f-ea10b3e5e815","versionSpec":"1.*","definitionType":"task"},"inputs":{"connectedServiceNameARM":"8e0bee02-4e10-41af-954d-a1da339b10ae","scriptLocation":"inlineScript","scriptPath":"distributed_training.py","inlineScript":"python scripts/register.py","args":"","addSpnToEnvironment":"false","useGlobalConfig":"false","cwd":"","failOnStandardError":"false"}}],"name":"Build and Test","refName":"Phase_1","condition":"succeeded()","target":{"executionOptions":{"type":0},"allowScriptsAuthAccessOption":false,"type":1},"jobAuthorizationScope":1,"jobCancelTimeoutInMinutes":1}],"type":1},"repository":{"properties":{"cleanOptions":"0","labelSources":"0","labelSourcesFormat":"$(build.buildNumber)","reportBuildStatus":"true","gitLfsSupport":"false","skipSyncSource":"false","checkoutNestedSubmodules":"false","fetchDepth":"0"},"id":"d369ec95-8e43-4950-a8b2-f5f37aec584e","type":"TfsGit","name":"ML DevOps-fin","url":"https://uanass@dev.azure.com/uanass/ML%20DevOps-fin/_git/ML%20DevOps-fin","defaultBranch":"refs/heads/master","clean":"false","checkoutSubmodules":false},"processParameters":{},"quality":1,"authoredBy":{"displayName":"Uasmi Nasser","url":"https://spsprodweu4.vssps.visualstudio.com/A7bc79ebf-2be4-4810-b3a7-b78df0e00242/_apis/Identities/836cd53b-4053-61ea-b90b-938f9e20fd70","_links":{"avatar":{"href":"https://dev.azure.com/uanass/_apis/GraphProfile/MemberAvatars/aad.ODM2Y2Q1M2ItNDA1My03MWVhLWI5MGItOTM4ZjllMjBmZDcw"}},"id":"836cd53b-4053-61ea-b90b-938f9e20fd70","uniqueName":"uanass@microsoft.com","imageUrl":"https://dev.azure.com/uanass/_apis/GraphProfile/MemberAvatars/aad.ODM2Y2Q1M2ItNDA1My03MWVhLWI5MGItOTM4ZjllMjBmZDcw","descriptor":"aad.ODM2Y2Q1M2ItNDA1My03MWVhLWI5MGItOTM4ZjllMjBmZDcw"},"drafts":[],"queue":{"_links":{"self":{"href":"https://dev.azure.com/uanass/_apis/build/Queues/32"}},"id":32,"name":"Hosted Ubuntu 1604","url":"https://dev.azure.com/uanass/_apis/build/Queues/32","pool":{"id":7,"name":"Hosted Ubuntu 1604","isHosted":true}},"id":3,"name":"ML DevOps-fin-Python package-CI","url":"https://dev.azure.com/uanass/ccde83eb-3d6a-4387-9f6d-a710ebd88d5b/_apis/build/Definitions/3?revision=28","uri":"vstfs:///Build/Definition/3","path":"\\","type":2,"queueStatus":0,"revision":28,"createdDate":"2019-05-09T13:03:31.830Z","project":{"id":"ccde83eb-3d6a-4387-9f6d-a710ebd88d5b","name":"ML DevOps-fin","description":"Properly set DevOps (Docker+ACI)","url":"https://dev.azure.com/uanass/_apis/projects/ccde83eb-3d6a-4387-9f6d-a710ebd88d5b","state":1,"revision":39,"visibility":0,"lastUpdateTime":"2019-04-02T06:00:47.593Z"}}